import{join as s}from"node:path";import{compileFile as u}from"pug";import"picocolors";function a(r,o,t){return r.replace(/<pug.+?(file|src)="(.+?)".*?\/.*?>/gi,(e,i,n)=>(i==="file"&&t&&t.warn(`the \`file\` attribute is deprecated, please include ${n} with \`src\` instead`),o(n)))}function c(r,o){return{name:"vite-plugin-pug",handleHotUpdate({file:t,server:e}){t.endsWith(".pug")&&(e.config.logger.info(`pug\u2019s not hot \u{1F32D} ${t}`),e.ws.send({type:"full-reload"}))},transformIndexHtml:{transform(t,{server:e,filename:i}){return a(t,n=>{let p=l=>u(l,r)(o);if(typeof r?.localImports=="function"&&r.localImports(i)||r?.localImports){let l=i.replace(/(.*)[\\\/].*\.html$/,"$1"),g=s(l,n);return p(g)}return p(n)},e?.config.logger)}}}}export{c as default,a as pugs};
//# sourceMappingURL=index.js.map